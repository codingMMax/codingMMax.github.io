<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Sixun Dong</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="blog.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <!-- Blog data (auto-generated by GitHub Actions) -->
    <script src="blog-data.js"></script>
</head>
<body>
    <!-- Navigation -->
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="index.html" class="nav-link">Bio</a>
                <a href="publications.html" class="nav-link">Publications</a>
                <a href="blog.html" class="nav-link active">Blog</a>
                <a href="files/CV_Dong.pdf" class="nav-link" target="_blank">CV(PDF)</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <section class="section">
            <div class="container">
                <h1 class="page-title-left">Blog</h1>
                
                <!-- Blog Posts List -->
                <div class="blog-list">
                    <!-- External Blog Post (Zhihu) -->
                    <div class="blog-item external-post">
                        <img src="images/blog/mamba.webp" alt="Mamba Architecture" class="blog-image">
                        <div class="blog-content">
                            <div class="blog-type-badge external">External</div>
                            <h3 class="blog-title">
                                <a href="https://zhuanlan.zhihu.com/p/684454735" target="_blank" class="blog-link">
                                    The Evolution from Mamba to Efficient Recurrent Transformers and SSM (S4)
                                </a>
                            </h3>
                            <p class="blog-description">
                                This article documents my research work on improving the modeling capabilities of long sequence tasks, primarily covering methods to reduce Transformer complexity to linear complexity, SSM-related work, and explorations in multimodal systems.
                            </p>
                            <div class="blog-meta">
                                <span class="blog-date">Mar 2024</span>
                                <div class="blog-links">
                                    <i class="fab fa-zhihu"></i> 
                                    <a href="https://zhuanlan.zhihu.com/p/684454735" target="_blank">Read on Zhihu</a>
                                </div>
                                <span class="blog-tags">
                                    <span class="blog-tag">Deep Learning</span>
                                    <span class="blog-tag">Transformers</span>
                                    <span class="blog-tag">State Space Models</span>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Dynamic blog posts will be inserted here by JavaScript -->
                </div>
            </div>
        </section>
    </main>



    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-stats">
                <div class="stats-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="visitor-location">Loading...</span>
                </div>
                <div class="stats-item">
                    <i class="fas fa-clock"></i>
                    Last updated: <span id="last-updated"></span>
                </div>
            </div>
            <p>&copy; 2025 Sixun Dong. All rights reserved.</p>
        </div>
    </footer>
    
    <script>

        
        // Get visitor location using IP API
        async function getVisitorLocation() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                const location = `${data.city}, ${data.country_name}`;
                document.getElementById('visitor-location').textContent = location;
            } catch (error) {
                document.getElementById('visitor-location').textContent = 'Unknown';
            }
        }
        
        // Set last updated time
        function setLastUpdated() {
            const now = new Date();
            const formatted = now.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            document.getElementById('last-updated').textContent = formatted;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            getVisitorLocation();
            setLastUpdated();
        });
    </script>

    <script>
        // Blog functionality
        
        // Blog posts storage - loaded from blog-data.js
        let blogPosts = {};
        
        // Sample post for when no blog data is available
        const samplePost = {
            'sample-post': {
                title: 'My Journey in Computer Vision Research',
                content: `
                    <div class="blog-post-content">
                        <p><strong>Coming Soon...</strong></p>
                        <p>This blog system now uses GitHub Actions to automatically process Markdown files!</p>
                        
                        <h3>How to Add Blog Posts</h3>
                        <ol>
                            <li>Create a <code>.md</code> file in the <code>blog/</code> directory</li>
                            <li>Add frontmatter with title, date, description, tags, and image</li>
                            <li>Commit and push to GitHub</li>
                            <li>GitHub Actions will automatically build and deploy your blog!</li>
                        </ol>
                        
                        <h3>Markdown Frontmatter Example</h3>
                        <pre><code>---
title: "My Blog Post Title"
date: "2024-03-15"
description: "A brief description of the post"
tags: ["Research", "AI", "Computer Vision"]
image: "images/blog/my-post.jpg"
---

# Your Markdown Content Here

This supports **bold**, *italic*, [links](https://example.com), and more!</code></pre>
                        
                        <h3>Features</h3>
                        <ul>
                            <li>GitHub Actions automation</li>
                            <li>Automatic Markdown parsing</li>
                            <li>Frontmatter metadata support</li>
                            <li>Static site generation</li>
                            <li>Full page blog posts</li>
                            <li>Responsive design</li>
                        </ul>
                        
                        <p>Just add your <code>.md</code> files to the <code>blog/</code> directory and push to GitHub!</p>
                    </div>
                `
            }
        };

        // Function to parse frontmatter from markdown
        function parseFrontmatter(content) {
            const frontmatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/;
            const match = content.match(frontmatterRegex);
            
            if (!match) {
                return { metadata: {}, content: content };
            }
            
            const frontmatter = match[1];
            const markdownContent = match[2];
            const metadata = {};
            
            // Parse YAML-like frontmatter
            frontmatter.split('\n').forEach(line => {
                const colonIndex = line.indexOf(':');
                if (colonIndex !== -1) {
                    const key = line.substring(0, colonIndex).trim();
                    let value = line.substring(colonIndex + 1).trim();
                    
                    // Remove quotes if present
                    if ((value.startsWith('"') && value.endsWith('"')) || 
                        (value.startsWith("'") && value.endsWith("'"))) {
                        value = value.slice(1, -1);
                    }
                    
                    // Parse arrays (tags)
                    if (value.startsWith('[') && value.endsWith(']')) {
                        value = value.slice(1, -1).split(',').map(item => 
                            item.trim().replace(/["']/g, '')
                        );
                    }
                    
                    metadata[key] = value;
                }
            });
            
            return { metadata, content: markdownContent };
        }

        // Function to load blog data from GitHub Actions generated file
        function loadBlogData() {
            try {
                // Check if blog data is available
                if (window.BLOG_DATA && window.BLOG_DATA.length > 0) {
                    console.log(`Loading ${window.BLOG_DATA.length} blog posts from GitHub Actions`);
                    
                    // Convert blog data to the format expected by the blog system
                    window.BLOG_DATA.forEach(post => {
                        blogPosts[post.id] = {
                            title: post.title,
                            content: `<div class="blog-post-content">${post.content}</div>`
                        };
                        
                        // Add blog item to the page
                        addBlogItemToPage(post);
                    });
                    
                    console.log('Blog data loaded successfully');
                } else {
                    console.log('No blog data found, using sample post');
                    // Use sample post when no blog data is available
                    blogPosts = samplePost;
                }
                
                return Promise.resolve();
            } catch (error) {
                console.error('Error loading blog data:', error);
                blogPosts = samplePost;
                return Promise.resolve();
            }
        }

        // Function to add blog item to the page
        function addBlogItemToPage(post) {
            const blogList = document.querySelector('.blog-list');
            const blogItem = document.createElement('div');
            blogItem.className = 'blog-item internal-post';
            blogItem.setAttribute('data-post-id', post.id);
            
            const tagHtml = post.tags.map(tag => `<span class="blog-tag">${tag}</span>`).join('');
            
            blogItem.innerHTML = `
                <img src="${post.image}" alt="${post.title}" class="blog-image" onerror="this.src='images/default-paper.png'">
                <div class="blog-content">
                    <div class="blog-type-badge internal">Blog</div>
                    <h3 class="blog-title">
                        <a href="#" class="blog-link internal-link">
                            ${post.title}
                        </a>
                    </h3>
                    <p class="blog-description">
                        ${post.description}
                    </p>
                    <div class="blog-meta">
                        <span class="blog-date">${post.formattedDate}</span>
                        <span class="blog-tags">
                            ${tagHtml}
                        </span>
                    </div>
                </div>
            `;
            
            // Insert after external posts but before sample post
            const samplePost = document.querySelector('[data-post-id="sample-post"]');
            if (samplePost) {
                blogList.insertBefore(blogItem, samplePost);
            } else {
                blogList.appendChild(blogItem);
            }
            
            // Add event listeners to blog title link
            const titleLink = blogItem.querySelector('.blog-title .internal-link');
            if (titleLink) {
                titleLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    openBlogPost(post.id);
                });
            }
        }

        // Function to open full page blog post
        function openBlogPost(postId) {
            if (blogPosts[postId]) {
                // Create a new page URL with the blog post ID
                const currentUrl = new URL(window.location);
                currentUrl.searchParams.set('post', postId);
                window.history.pushState({ postId: postId }, '', currentUrl);
                
                // Show the blog post in full page
                showFullPageBlog(postId);
            }
        }

        // Function to show full page blog
        function showFullPageBlog(postId) {
            const post = blogPosts[postId];
            if (!post) return;

            // Hide the main blog list
            const mainContent = document.querySelector('.main');
            mainContent.innerHTML = `
                <section class="section">
                    <div class="container">
                        <div class="blog-post-header">
                            <button class="back-to-blog-btn" onclick="backToBlogList()">
                                <i class="fas fa-arrow-left"></i> Back to Blog
                            </button>
                            <h1 class="blog-post-title">${post.title}</h1>
                        </div>
                        <div class="blog-post-full-content">
                            ${post.content}
                        </div>
                    </div>
                </section>
            `;
        }

        // Function to go back to blog list
        function backToBlogList() {
            // Remove the post parameter from URL
            const currentUrl = new URL(window.location);
            currentUrl.searchParams.delete('post');
            window.history.pushState({}, '', currentUrl);
            
            // Reload the page to restore original content
            window.location.reload();
        }

        // Handle browser back/forward buttons
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.postId) {
                showFullPageBlog(event.state.postId);
            } else {
                window.location.reload();
            }
        });

        // Check URL on page load for direct blog post links
        function checkUrlForBlogPost() {
            const urlParams = new URLSearchParams(window.location.search);
            const postId = urlParams.get('post');
            if (postId && blogPosts[postId]) {
                showFullPageBlog(postId);
            }
        }

        // Initialize existing internal links
        function initializeInternalLinks() {
            const internalLinks = document.querySelectorAll('.internal-link');
            internalLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const postItem = this.closest('.blog-item');
                    const postId = postItem.getAttribute('data-post-id');
                    openBlogPost(postId);
                });
            });
        }

        // Initialize the blog system
        document.addEventListener('DOMContentLoaded', function() {
            initializeInternalLinks();
            loadBlogData().then(() => {
                // Check if URL contains a specific blog post
                checkUrlForBlogPost();
            });
        });


    </script>
</body>
</html> 