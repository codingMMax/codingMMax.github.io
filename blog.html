<!DOCTYPE html>
<!-- 
  Generated by Config-Driven Academic Website Template
  Author: Sixun Dong (ironieser)
  Repository: https://github.com/Ironieser/ironieser.github.io
  License: MIT
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Sixun Dong</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="blog.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <script src="blog-data.js"></script>
</head>
<body>
    <!-- Navigation -->
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="index.html" class="nav-link " >Bio</a>
                <a href="publications.html" class="nav-link " >Publications</a>
                <a href="blog.html" class="nav-link active" >Blog</a>
                <a href="files/CV_Dong.pdf" class="nav-link " target="_blank">CV(PDF)</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Blog List View -->
        <div id="blog-list-view" class="blog-view">
            <!-- Page Header -->
            <section class="page-header">
                <div class="container">
                    <div class="page-header-content">
                        <h1 class="page-title-left">Blog</h1>
                        <div class="blog-intro">
                            <p>Welcome to my blog! Here I share insights about my research, thoughts on the latest developments in computer vision and AI, tutorials, and reflections on my academic journey.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Blog Posts Grid -->
            <section class="section">
                <div class="container">
                    <div id="blog-posts-container" class="blog-posts-grid">
                        <!-- Blog posts will be loaded here by JavaScript -->
                    </div>
                    
                    <!-- Loading indicator -->
                    <div id="blog-loading" class="blog-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading blog posts...</p>
                    </div>
                    
                    <!-- No posts message -->
                    <div id="no-posts-message" class="no-posts-message" style="display: none;">
                        <i class="fas fa-pen-nib"></i>
                        <h3>No Blog Posts Yet</h3>
                        <p>Check back soon for new content!</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Blog Post View -->
        <div id="blog-post-view" class="blog-view" style="display: none;">
            <section class="section">
                <div class="container">
                    <div class="blog-post-container">
                        <!-- Back button -->
                        <div class="blog-navigation">
                            <button id="back-to-list" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Back to Blog
                            </button>
                        </div>
                        
                        <!-- Post content will be loaded here -->
                        <article id="blog-post-content" class="blog-post-content">
                            <!-- Content loaded by JavaScript -->
                        </article>
                    </div>
                </div>
            </section>
        </div>
    </main>

    
    <footer class="footer">
        <div class="container">
            <!-- Visitor Map Section -->
            <div class="visitor-map-section">
                <div class="visitor-map-container">
                    <!-- Visitor Map Widget -->
                    <div class="visitor-map">
                        <!-- ClustrMaps Widget -->
                        <script type="text/javascript" id="clustrmaps" src="//clustrmaps.com/map_v2.js?d=r_cMMykDPAdqK2GTahWbR__mtnzcj9svUgejZ86OXnU&cl=ffffff&w=a"></script>
                    </div>
                </div>
            </div>

            <div class="footer-stats">
                <div class="stats-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="visitor-location">Loading...</span>
                </div>
                <div class="stats-item">
                    <i class="fas fa-clock"></i>
                    Last updated: <span id="last-updated"></span>
                </div>
            </div>
            <p>&copy; 2025 Sixun Dong. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        // Blog functionality
        let currentView = 'list';
        let currentPost = null;
        
        function showBlogList() {
            document.getElementById('blog-list-view').style.display = 'block';
            document.getElementById('blog-post-view').style.display = 'none';
            currentView = 'list';
            
            // Update URL without page reload
            const url = new URL(window.location);
            url.searchParams.delete('post');
            window.history.replaceState({}, '', url);
        }
        
        function showBlogPost(postId) {
            const post = window.getBlogPost(postId);
            if (!post) {
                console.error('Post not found:', postId);
                return;
            }
            
            currentPost = post;
            
            // Hide list view, show post view
            document.getElementById('blog-list-view').style.display = 'none';
            document.getElementById('blog-post-view').style.display = 'block';
            currentView = 'post';
            
            // Update URL
            const url = new URL(window.location);
            url.searchParams.set('post', postId);
            window.history.replaceState({}, '', url);
            
            // Load post content
            loadPostContent(post);
        }
        
        function loadPostContent(post) {
            const container = document.getElementById('blog-post-content');
            
            const tagsHtml = post.tags.map(tag => 
                `<span class="blog-tag">${tag}</span>`
            ).join('');
            
            container.innerHTML = `
                <header class="blog-post-header">
                    <h1 class="blog-post-title">${post.title}</h1>
                    <div class="blog-post-meta">
                        <span class="blog-post-date">
                            <i class="fas fa-calendar"></i> ${post.formattedDate}
                        </span>
                    </div>
                    <div class="blog-post-tags">
                        ${tagsHtml}
                    </div>
                </header>
                
                <div class="blog-post-body">
                    ${post.content}
                </div>
            `;
        }
        
        function loadBlogPosts() {
            const container = document.getElementById('blog-posts-container');
            const loading = document.getElementById('blog-loading');
            const noPostsMsg = document.getElementById('no-posts-message');
            
            try {
                const posts = window.getAllBlogPosts();
                
                loading.style.display = 'none';
                
                if (posts.length === 0) {
                    noPostsMsg.style.display = 'block';
                    return;
                }
                
                const postsHtml = posts.map(post => {
                    const tagsHtml = post.tags.slice(0, 3).map(tag => 
                        `<span class="blog-tag">${tag}</span>`
                    ).join('');
                    
                    return `
                        <article class="blog-post-card" data-post-id="${post.id}">
                            <div class="blog-post-image">
                                <img src="${post.image}" alt="${post.title}" onerror="this.src='images/default-paper.png'">
                            </div>
                            <div class="blog-post-card-content">
                                <h3 class="blog-post-card-title">${post.title}</h3>
                                <p class="blog-post-card-description">${post.description}</p>
                                <div class="blog-post-card-meta">
                                    <span class="blog-post-card-date">${post.formattedDate}</span>
                                    <div class="blog-post-card-tags">
                                        ${tagsHtml}
                                    </div>
                                </div>
                                <button class="blog-read-more" data-post-id="${post.id}">
                                    Read More <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </article>
                    `;
                }).join('');
                
                container.innerHTML = postsHtml;
                
                // Add click handlers
                document.querySelectorAll('.blog-read-more').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const postId = this.getAttribute('data-post-id');
                        showBlogPost(postId);
                    });
                });
                
                document.querySelectorAll('.blog-post-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const postId = this.getAttribute('data-post-id');
                        showBlogPost(postId);
                    });
                });
                
            } catch (error) {
                loading.style.display = 'none';
                console.error('Error loading blog posts:', error);
                container.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Error Loading Posts</h3>
                        <p>There was an error loading the blog posts. Please try again later.</p>
                    </div>
                `;
            }
        }
        
        function initializeBlog() {
            // Check for post parameter in URL
            const urlParams = new URLSearchParams(window.location.search);
            const postId = urlParams.get('post');
            
            if (postId) {
                // Show specific post
                showBlogPost(postId);
            } else {
                // Show blog list
                showBlogList();
                loadBlogPosts();
            }
            
            // Back button handler
            document.getElementById('back-to-list').addEventListener('click', function() {
                showBlogList();
                loadBlogPosts();
            });
            
            // Handle browser back/forward
            window.addEventListener('popstate', function() {
                const urlParams = new URLSearchParams(window.location.search);
                const postId = urlParams.get('post');
                
                if (postId) {
                    showBlogPost(postId);
                } else {
                    showBlogList();
                    loadBlogPosts();
                }
            });
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a bit for blog-data.js to load
            setTimeout(function() {
                if (typeof window.BLOG_DATA !== 'undefined') {
                    initializeBlog();
                } else {
                    console.error('Blog data not loaded');
                    document.getElementById('blog-loading').style.display = 'none';
                    document.getElementById('no-posts-message').style.display = 'block';
                }
            }, 100);
        });
    </script>
    
    
    <script>
        // Get visitor location using IP API
        async function getVisitorLocation() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                const location = `${data.city}, ${data.country_name}`;
                document.getElementById('visitor-location').textContent = location;
            } catch (error) {
                document.getElementById('visitor-location').textContent = 'Unknown';
            }
        }
        
        // Set last updated time
        function setLastUpdated() {
            const now = new Date();
            const formatted = now.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            document.getElementById('last-updated').textContent = formatted;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            getVisitorLocation();
            setLastUpdated();
        });
    </script>
</body>
</html>